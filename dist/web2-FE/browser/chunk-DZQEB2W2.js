import{a as Se,b as xe}from"./chunk-UEQAXF6Y.js";import{a as ye,b as Ce}from"./chunk-FPOPPYRC.js";import{a as y}from"./chunk-KUMYF4UO.js";import{$ as S,$a as P,A as M,Ea as $,Fa as k,G as s,H as _,Ha as ee,Ia as te,Ka as z,M as b,O as c,Oa as re,Pa as ae,Qa as ne,Sa as oe,Ta as D,U as n,Ua as j,V as i,W as p,Xa as le,Ya as q,Za as B,_ as x,_a as W,aa as h,ab as se,cb as ce,eb as ue,fa as U,fb as de,ga as Y,gb as me,ha as H,hb as pe,ia as v,ib as fe,ja as l,jb as he,ka as E,kb as ve,la as O,ma as w,mb as ge,na as V,oa as I,ob as Me,r as T,ra as A,sa as J,ub as _e,v as N,w as L,wa as X,wb as be,xa as Z,z as g}from"./chunk-4OGKRTZH.js";import{a as ie}from"./chunk-T5ZVXQTA.js";import{d as K}from"./chunk-FDERIQAA.js";var Ee=K(ie());var Ne=()=>["/matriculas/novo"],Le=r=>["/matriculas/editar",r];function Ae(r,a){r&1&&(n(0,"p"),l(1,"Nenhum(a) matricula(a) cadastrado(a)."),i())}function ke(r,a){if(r&1){let u=x();n(0,"tr")(1,"td"),l(2),i(),n(3,"td"),l(4),i(),n(5,"td"),l(6),i(),n(7,"td"),l(8),X(9,"date"),i(),n(10,"td",10)(11,"div",11)(12,"div",12)(13,"button",13),S("click",function(){let e=g(u).$implicit,o=h();return M(o.abrirMatriculaModal(e))}),p(14,"i",14),l(15," Visualizar "),i()(),n(16,"div",12)(17,"button",15),p(18,"i",16),l(19," Editar "),i()(),n(20,"div",12)(21,"button",17),S("confirm",function(){let e=g(u).$implicit,o=h();return M(o.removerMatricula(e))}),p(22,"i",18),l(23," Remover "),i()()()()()}if(r&2){let u=a.$implicit,t=h();s(2),E(u.aluno.nome),s(2),E(u.curso.nome),s(2),E(u.nota),s(2),E(Z(9,6,u.dataMatricula,"dd/MM/yyyy")),s(9),c("routerLink",J(9,Le,u.id)),s(4),c("swal",t.alertaCofirmaRemoverMatricula(u.aluno.nome))}}var Q=(()=>{let a=class a{constructor(t,e){this.matriculaService=t,this.modalService=e,this.matriculas=[]}ngOnInit(){this.matriculas=this.listarTodos()}listarTodos(t){return this.matriculaService.listarTodos(t).subscribe({next:e=>{e==null?this.matriculas=[]:this.matriculas=e},error:e=>{console.log(e)}}),this.matriculas}filtrarMatriculas(t){let o=t.target.value;o===""?this.matriculas=this.listarTodos():this.matriculas=this.listarTodos(o)}removerMatricula(t){this.matriculaService.remover(t.id).subscribe({complete:()=>{this.listarTodos()},error:e=>{console.log(e)}}),Ee.default.fire({title:"Removido(a)!",text:"A matricula selecionada foi removida da base de dados.",icon:"success"})}alertaCofirmaRemoverMatricula(t){return{title:`Voc\xEA realmente deseja remover a matricula do Aluno(a) ${t}?`,text:"N\xE3o ser\xE1 poss\xEDvel reverter essa a\xE7\xE3o.",icon:"warning",showCancelButton:!0,cancelButtonText:"Cancelar",confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Sim, remover!"}}abrirMatriculaModal(t){let e=this.modalService.open(be);e.componentInstance.object=t,e.componentInstance.title="Matricula"}};a.\u0275fac=function(e){return new(e||a)(_(y),_(_e))},a.\u0275cmp=N({type:a,selectors:[["app-listar-matricula"]],decls:26,vars:4,consts:[[4,"ngIf"],[1,"d-flex","bd-highlight","mb-3"],[1,"me-auto","p-2","bd-highlight"],["href","#","title","Novo","alt","Novo",1,"btn","btn-xs","btn-success",3,"routerLink"],["aria-hidden","true",1,"fa","fa-plus"],[1,"p-2","bd-highlight"],["type","search","placeholder","Pesquisar por nome...","aria-label","Pesquisar",1,"form-control","me-2",3,"input"],[1,"table-responsive"],[1,"table","table-striped","table-bordered","table-hover"],[4,"ngFor","ngForOf"],[2,"width","350px"],[1,"row","gx-2","gy-2"],[1,"col-auto"],["type","button","type","button","href","#","title","Visualizar","alt","Visualizar",1,"btn","btn-primary",3,"click"],[1,"fa-regular","fa-eye"],["type","button","href","#","title","Editar","alt","Editar",1,"btn","btn-secondary",3,"routerLink"],["aria-hidden","true",1,"fa","fa-edit"],["type","button","href","#","title","Remover","alt","Remover",1,"btn","btn-xs","btn-danger",3,"confirm","swal"],["aria-hidden","true",1,"fa","fa-times"]],template:function(e,o){e&1&&(n(0,"h1"),l(1,"Matriculas"),i(),p(2,"hr"),b(3,Ae,2,0,"p",0),n(4,"div",1)(5,"div",2)(6,"a",3),p(7,"i",4),l(8," Novo "),i()(),n(9,"div",5)(10,"input",6),S("input",function(f){return o.filtrarMatriculas(f)}),i()()(),n(11,"div",7)(12,"table",8)(13,"tbody")(14,"tr")(15,"th"),l(16,"Nome"),i(),n(17,"th"),l(18,"Curso"),i(),n(19,"th"),l(20,"Nota"),i(),n(21,"th"),l(22,"Data matricula"),i(),n(23,"th"),l(24,"A\xE7\xF5es"),i()(),b(25,ke,24,11,"tr",9),i()()()),e&2&&(s(3),c("ngIf",o.matriculas.length===0),s(3),c("routerLink",A(3,Ne)),s(19),c("ngForOf",o.matriculas))},dependencies:[$,k,D,re,ee],encapsulation:2});let r=a;return r})();var C=K(ie());var ze=["formMatricula"],De=()=>["/matriculas"];function Re(r,a){if(r&1&&(n(0,"div",18)(1,"div",19),l(2,"Selecione um aluno."),i()()),r&2){h();let u=v(10);s(),c("hidden",!u.errors.required)}}function Fe(r,a){if(r&1&&(n(0,"div",18)(1,"div",19),l(2,"Selecione um curso."),i()()),r&2){h();let u=v(16);s(),c("hidden",!u.errors.required)}}function Oe(r,a){if(r&1&&(n(0,"div",18)(1,"div",19),l(2,"Digite a nota do aluno."),i()()),r&2){h();let u=v(22);s(),c("hidden",!u.errors.required)}}function je(r,a){if(r&1&&(n(0,"div",18)(1,"div",19),l(2," Digite a data da matricula. "),i(),n(3,"div",19),l(4," A data precisa ter no m\xEDnimo 10 caracteres. "),i()()),r&2){h();let u=v(29);s(),c("hidden",!u.errors.required),s(2),c("hidden",!u.errors.minlength)}}function qe(r,a){if(r&1){let u=x();n(0,"button",20),S("click",function(){g(u);let e=h();return M(e.handleClik())}),p(1,"i",21),l(2),i()}if(r&2){let u=h(),t=v(5);c("disabled",!t.form.valid),s(2),O(" ",u.isEdit?"Atualizar":"Salvar"," ")}}var R=(()=>{let a=class a{constructor(t,e,o,m,f){this.matriculaService=t,this.router=e,this.activatedRoute=o,this.alunoService=m,this.cursoService=f,this.matricula=new le,this.isEdit=!1,this.isViewMode=!1,this.alunos=[],this.cursos=[]}ngOnInit(){this.alunos=this.listarAlunos(),this.cursos=this.listarCursos();let t=this.activatedRoute.snapshot.params.id;t?(this.router.url.includes("visualizar")?this.isViewMode=!0:this.isEdit=!0,this.matriculaService.buscarPorId(+t).subscribe({next:e=>{e!=null?(e.dataMatricula=se(e.dataMatricula),this.matricula=e):console.log("error")},error:e=>{C.default.fire({icon:"error",title:"Oops...",text:"Matricula n\xE3o encontrada."}),this.router.navigate(["/matriculas"])}})):(this.isEdit=!1,this.isViewMode=!1)}listarAlunos(t){return this.alunoService.listarTodos(t).subscribe({next:e=>{e==null?this.alunos=[]:this.alunos=e},error:e=>{console.log(e)}}),this.alunos}listarCursos(t){return this.cursoService.listarTodos(t).subscribe({next:e=>{e==null?this.cursos=[]:this.cursos=e},error:e=>{console.log(e)}}),this.cursos}handleClik(){this.isEdit?this.editar():this.inserir()}inserir(){this.formMatricula.form.valid&&(this.matricula.dataMatricula=P(this.matricula.dataMatricula),this.matriculaService.inserir(this.matricula).subscribe({next:t=>{C.default.fire({title:"Sucesso",text:"A Matricula foi criada na base de dados.",icon:"success"})},error:t=>{t.status==409?C.default.fire({icon:"error",title:"Oops...",text:"Matricula j\xE1 existente."}):C.default.fire({icon:"error",title:"Oops...",text:`[${t.status}] ${t.message}`})},complete:()=>{this.router.navigate(["/matriculas"])}}))}editar(){this.formMatricula.valid&&(this.matricula.dataMatricula=P(this.matricula.dataMatricula),this.matriculaService.atualizar(this.matricula).subscribe({next:t=>{C.default.fire({title:"Sucesso",text:"Suas altera\xE7\xF5es foram salvas na base de dados.",icon:"success"})},error:t=>{t.status==409?C.default.fire({icon:"error",title:"Oops...",text:"Matricula j\xE1 existente."}):C.default.fire({icon:"error",title:"Oops...",text:`[${t.status}] ${t.message}`})},complete:()=>{this.router.navigate(["/matriculas"])}}))}};a.\u0275fac=function(e){return new(e||a)(_(y),_(oe),_(ne),_("AlunoCrudService"),_("CursoCrudService"))},a.\u0275cmp=N({type:a,selectors:[["app-visualizar-inserir-editar-matricula"]],viewQuery:function(e,o){if(e&1&&U(ze,5),e&2){let m;Y(m=H())&&(o.formMatricula=m.first)}},decls:40,vars:17,consts:[["formMatricula","ngForm"],["aluno","ngModel"],["curso","ngModel"],["nota","ngModel"],["dataMatricula","ngModel"],[1,"well"],[1,"form-group"],["for","nome"],["name","aluno","bindLabel","nome","required","","placeholder","Selecionar um aluno",3,"ngModelChange","items","ngModel"],["class","alert alert-danger",4,"ngIf"],["name","curso","bindLabel","nome","required","","placeholder","Selecionar um curso",3,"ngModelChange","items","ngModel"],["type","number","id","nome","name","nota","required","","placeholder","Digite a nota do aluno...",1,"form-control",3,"ngModelChange","disabled","ngModel"],["type","text","id","dataMatricula","name","dataMatricula","mask","d0/M0/0000","required","","placeholder","Digite a data da matricula no formato dd/MM/yyyy...","autocomplete","off","minlength","10",1,"form-control",3,"ngModelChange","dropSpecialCharacters","ngModel","disabled"],[1,"row","gx-2","gy-2"],[1,"col-auto"],["type","button","class","btn btn-primary",3,"disabled","click",4,"ngIf"],[1,"btn","btn-secondary",3,"routerLink"],["aria-hidden","true",1,"fa","fa-arrow-left"],[1,"alert","alert-danger"],[3,"hidden"],["type","button",1,"btn","btn-primary",3,"click","disabled"],["aria-hidden","true",1,"fa","fa-save"]],template:function(e,o){if(e&1){let m=x();n(0,"h1"),l(1),i(),p(2,"hr"),n(3,"div",5)(4,"form",null,0)(6,"div",6)(7,"label",7),l(8,"Aluno:"),i(),n(9,"ng-select",8,1),I("ngModelChange",function(d){return g(m),V(o.matricula.aluno,d)||(o.matricula.aluno=d),M(d)}),i(),b(11,Re,3,1,"div",9),i(),n(12,"div",6)(13,"label",7),l(14,"Curso:"),i(),n(15,"ng-select",10,2),I("ngModelChange",function(d){return g(m),V(o.matricula.curso,d)||(o.matricula.curso=d),M(d)}),i(),b(17,Fe,3,1,"div",9),i(),n(18,"div",6)(19,"label",7),l(20,"Nota:"),i(),n(21,"input",11,3),I("ngModelChange",function(d){return g(m),V(o.matricula.nota,d)||(o.matricula.nota=d),M(d)}),i(),b(23,Oe,3,1,"div",9),i(),p(24,"br"),n(25,"div",6)(26,"label",7),l(27,"Data Matricula:"),i(),n(28,"input",12,4),I("ngModelChange",function(d){return g(m),V(o.matricula.dataMatricula,d)||(o.matricula.dataMatricula=d),M(d)}),i(),b(30,je,5,2,"div",9),i(),p(31,"br"),n(32,"div",6)(33,"div",13)(34,"div",14),b(35,qe,3,2,"button",15),i(),n(36,"div",14)(37,"a",16),p(38,"i",17),l(39," Voltar "),i()()()()()()}if(e&2){let m=v(10),f=v(16),d=v(22),F=v(29);s(),O("",o.isEdit?"Editar":o.isViewMode?"Visualizar":"Novo"," Matricula"),s(8),c("items",o.alunos),w("ngModel",o.matricula.aluno),s(2),c("ngIf",m.errors&&(m.dirty||m.touched)),s(4),c("items",o.cursos),w("ngModel",o.matricula.curso),s(2),c("ngIf",f.errors&&(f.dirty||f.touched)),s(4),c("disabled",o.isViewMode),w("ngModel",o.matricula.nota),s(2),c("ngIf",d.errors&&(d.dirty||d.touched)),s(5),c("dropSpecialCharacters",!1),w("ngModel",o.matricula.dataMatricula),c("disabled",o.isViewMode),s(2),c("ngIf",F.errors&&(F.dirty||F.touched)),s(5),c("ngIf",!o.isViewMode),s(2),c("routerLink",A(16,De))}},dependencies:[k,D,fe,ce,he,ue,de,ve,ge,pe,me,Ce,Se],encapsulation:2});let r=a;return r})();var Be=[{path:"",component:Q},{path:"listar",component:Q},{path:"novo",component:R},{path:"editar/:id",component:R},{path:"visualizar/:id",component:R}],we=(()=>{let a=class a{};a.\u0275fac=function(e){return new(e||a)},a.\u0275mod=L({type:a}),a.\u0275inj=T({imports:[j.forChild(Be),j]});let r=a;return r})();var vt=(()=>{let a=class a{};a.\u0275fac=function(e){return new(e||a)},a.\u0275mod=L({type:a}),a.\u0275inj=T({providers:[{provide:W,useValue:"matriculas"},{provide:y,useFactory:(t,e)=>new y(t,e),deps:[W,z]},{provide:B,useValue:"alunos"},{provide:"AlunoCrudService",useFactory:(t,e)=>new y(t,e),deps:[B,z]},{provide:q,useValue:"cursos"},{provide:"CursoCrudService",useFactory:(t,e)=>new y(t,e),deps:[q,z]},ye()],imports:[te,we,Me,ae.forChild(),xe]});let r=a;return r})();export{vt as MatriculaModule};
