import{a as x}from"./chunk-KUMYF4UO.js";import{$ as y,A as g,Ea as H,F as B,Fa as k,G as a,H as b,Ia as K,Ka as Y,M as _,O as c,Oa as X,Pa as Z,Qa as ee,Sa as te,Ta as L,U as n,Ua as j,V as o,W as u,Wa as ie,Ya as D,_ as E,aa as p,cb as re,da as W,eb as oe,fa as Q,fb as ne,ga as U,gb as se,ha as $,hb as ae,ia as S,ib as le,ja as l,ka as T,kb as de,la as z,ma as R,mb as ce,na as O,nb as ue,oa as F,ob as me,r as w,ra as M,sa as G,ub as pe,v as V,w as I,wb as fe,z as C}from"./chunk-4OGKRTZH.js";import{a as J}from"./chunk-T5ZVXQTA.js";import{d as A}from"./chunk-FDERIQAA.js";var he=A(J());var _e=()=>["/cursos/novo"],xe=r=>["/cursos/editar",r];function ye(r,i){r&1&&(n(0,"p"),l(1,"Nenhum curso cadastrado."),o())}function Se(r,i){if(r&1){let d=E();n(0,"tr")(1,"td"),l(2),o(),n(3,"td")(4,"a",10),l(5),o()(),n(6,"td",11)(7,"div",12)(8,"div",13)(9,"button",14),y("click",function(){let e=C(d).$implicit,s=p();return g(s.abrirCursoModal(e))}),u(10,"i",15),l(11," Visualizar "),o()(),n(12,"div",13)(13,"button",16),u(14,"i",17),l(15," Editar "),o()(),n(16,"div",13)(17,"button",18),y("confirm",function(){let e=C(d).$implicit,s=p();return g(s.removerCurso(e))}),u(18,"i",19),l(19," Remover "),o()()()()()}if(r&2){let d=i.$implicit,t=p();a(2),T(d.nome),a(2),W("href",d.link,B),a(),T(d.link),a(8),c("routerLink",G(5,xe,d.id)),a(4),c("swal",t.alertaCofirmaRemoverCurso(d.nome))}}var P=(()=>{let i=class i{constructor(t,e){this.cursoService=t,this.modalService=e,this.cursos=[]}ngOnInit(){this.cursos=this.listarTodos()}listarTodos(t){return this.cursoService.listarTodos(t).subscribe({next:e=>{e==null?this.cursos=[]:this.cursos=e},error:e=>{console.log(e)}}),this.cursos}filtrarCursos(t){let s=t.target.value;s===""?this.cursos=this.listarTodos():this.cursos=this.listarTodos(s)}removerCurso(t){this.cursoService.remover(t.id).subscribe({complete:()=>{this.listarTodos()},error:e=>{console.log(e)}}),he.default.fire({title:"Removido!",text:"O curso selecionado foi removido da base de dados.",icon:"success"})}alertaCofirmaRemoverCurso(t){return{title:`Voc\xEA realmente deseja remover o curso ${t}?`,text:"N\xE3o ser\xE1 poss\xEDvel reverter essa a\xE7\xE3o.",icon:"warning",showCancelButton:!0,cancelButtonText:"Cancelar",confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Sim, remover!"}}abrirCursoModal(t){let e=this.modalService.open(fe);e.componentInstance.object=t,e.componentInstance.title="Curso"}};i.\u0275fac=function(e){return new(e||i)(b(x),b(pe))},i.\u0275cmp=V({type:i,selectors:[["app-listar-curso"]],decls:22,vars:4,consts:[[4,"ngIf"],[1,"d-flex","bd-highlight","mb-3"],[1,"me-auto","p-2","bd-highlight"],["href","#","title","Novo","alt","Novo",1,"btn","btn-xs","btn-success",3,"routerLink"],["aria-hidden","true",1,"fa","fa-plus"],[1,"p-2","bd-highlight"],["type","search","placeholder","Pesquisar por nome...","aria-label","Pesquisar",1,"form-control","me-2",3,"input"],[1,"table-responsive"],[1,"table","table-striped","table-bordered","table-hover"],[4,"ngFor","ngForOf"],["target","_blank",3,"href"],[2,"width","350px"],[1,"row","gx-2","gy-2"],[1,"col-auto"],["type","button","type","button","href","#","title","Visualizar","alt","Visualizar",1,"btn","btn-primary",3,"click"],[1,"fa-regular","fa-eye"],["type","button","href","#","title","Editar","alt","Editar",1,"btn","btn-secondary",3,"routerLink"],["aria-hidden","true",1,"fa","fa-edit"],["type","button","href","#","title","Remover","alt","Remover",1,"btn","btn-xs","btn-danger",3,"confirm","swal"],["aria-hidden","true",1,"fa","fa-times"]],template:function(e,s){e&1&&(n(0,"h1"),l(1,"Cursos"),o(),u(2,"hr"),_(3,ye,2,0,"p",0),n(4,"div",1)(5,"div",2)(6,"a",3),u(7,"i",4),l(8," Novo "),o()(),n(9,"div",5)(10,"input",6),y("input",function(f){return s.filtrarCursos(f)}),o()()(),n(11,"div",7)(12,"table",8)(13,"tbody")(14,"tr")(15,"th"),l(16,"Nome"),o(),n(17,"th"),l(18,"Link"),o(),n(19,"th"),l(20,"A\xE7\xF5es"),o()(),_(21,Se,20,7,"tr",9),o()()()),e&2&&(a(3),c("ngIf",s.cursos.length===0),a(3),c("routerLink",M(3,_e)),a(15),c("ngForOf",s.cursos))},dependencies:[H,k,L,X],encapsulation:2});let r=i;return r})();var h=A(J());var Ee=["formCurso"],we=()=>["/cursos"];function Ve(r,i){if(r&1&&(n(0,"div",14)(1,"div",15),l(2,"Digite o nome da curso."),o(),n(3,"div",15),l(4," O nome da curso deve conter ao menos 5 caracteres. "),o()()),r&2){p();let d=S(10);a(),c("hidden",!d.errors.required),a(2),c("hidden",!d.errors.minlength)}}function Ie(r,i){if(r&1&&(n(0,"div",14)(1,"div",15),l(2,"Digite o nome do link."),o(),n(3,"div",15),l(4," O nome do link deve conter ao menos 10 caracteres. "),o(),n(5,"div",15),l(6,"URL inv\xE1lida."),o()()),r&2){p();let d=S(17);a(),c("hidden",!(d.errors!=null&&d.errors.required)),a(2),c("hidden",!(d.errors!=null&&d.errors.minlength)),a(2),c("hidden",!(d.errors!=null&&d.errors.pattern))}}function Me(r,i){if(r&1){let d=E();n(0,"button",16),y("click",function(){C(d);let e=p();return g(e.handleClik())}),u(1,"i",17),l(2),o()}if(r&2){let d=p(),t=S(5);c("disabled",!t.form.valid),a(2),z(" ",d.isEdit?"Atualizar":"Salvar"," ")}}var N=(()=>{let i=class i{constructor(t,e,s){this.cursoService=t,this.router=e,this.activatedRoute=s,this.curso=new ie,this.isEdit=!1,this.isViewMode=!1}ngOnInit(){let t=this.activatedRoute.snapshot.params.id;t?(this.router.url.includes("visualizar")?this.isViewMode=!0:this.isEdit=!0,this.cursoService.buscarPorId(+t).subscribe({next:e=>{e!=null?this.curso=e:console.log("error")},error:e=>{h.default.fire({icon:"error",title:"Oops...",text:"Curso n\xE3o encontrado."}),this.router.navigate(["/cursos"])}})):(this.isEdit=!1,this.isViewMode=!1)}handleClik(){this.isEdit?this.editar():this.inserir()}inserir(){this.formCurso.form.valid&&this.cursoService.inserir(this.curso).subscribe({next:t=>{h.default.fire({title:"Sucesso",text:"O Curso foi criado na base de dados.",icon:"success"})},error:t=>{t.status==409?h.default.fire({icon:"error",title:"Oops...",text:"Curso j\xE1 existente."}):h.default.fire({icon:"error",title:"Oops...",text:`[${t.status}] ${t.message}`})},complete:()=>{this.router.navigate(["/cursos"])}})}editar(){this.formCurso.valid&&this.cursoService.atualizar(this.curso).subscribe({next:t=>{h.default.fire({title:"Sucesso",text:"Suas altera\xE7\xF5es foram salvas na base de dados.",icon:"success"})},error:t=>{t.status==409?h.default.fire({icon:"error",title:"Oops...",text:"Curso j\xE1 existente."}):h.default.fire({icon:"error",title:"Oops...",text:`[${t.status}] ${t.message}`})},complete:()=>{this.router.navigate(["/cursos"])}})}};i.\u0275fac=function(e){return new(e||i)(b(x),b(te),b(ee))},i.\u0275cmp=V({type:i,selectors:[["app-visualizar-inserir-editar-curso"]],viewQuery:function(e,s){if(e&1&&Q(Ee,5),e&2){let m;U(m=$())&&(s.formCurso=m.first)}},decls:28,vars:10,consts:[["formCurso","ngForm"],["nome","ngModel"],["link","ngModel"],[1,"well"],[1,"form-group"],["for","nome"],["type","text","id","nome","name","nome","minlength","5","required","","placeholder","Digite o nome do curso...",1,"form-control",3,"ngModelChange","disabled","ngModel"],["class","alert alert-danger",4,"ngIf"],["type","text","id","link","name","link","minlength","10","required","","pattern","https?://.+","placeholder","Digite uma URL v\xE1lida (https://exemplo.com.br)",1,"form-control",3,"ngModelChange","ngModel","disabled"],[1,"row","gx-2","gy-2"],[1,"col-auto"],["type","button","class","btn btn-primary",3,"disabled","click",4,"ngIf"],[1,"btn","btn-secondary",3,"routerLink"],["aria-hidden","true",1,"fa","fa-arrow-left"],[1,"alert","alert-danger"],[3,"hidden"],["type","button",1,"btn","btn-primary",3,"click","disabled"],["aria-hidden","true",1,"fa","fa-save"]],template:function(e,s){if(e&1){let m=E();n(0,"h1"),l(1),o(),u(2,"hr"),n(3,"div",3)(4,"form",null,0)(6,"div",4)(7,"label",5),l(8,"Nome:"),o(),n(9,"input",6,1),F("ngModelChange",function(v){return C(m),O(s.curso.nome,v)||(s.curso.nome=v),g(v)}),o(),_(11,Ve,5,2,"div",7),o(),u(12,"br"),n(13,"div",4)(14,"label",5),l(15,"Link:"),o(),n(16,"input",8,2),F("ngModelChange",function(v){return C(m),O(s.curso.link,v)||(s.curso.link=v),g(v)}),o(),_(18,Ie,7,3,"div",7),o(),u(19,"br"),n(20,"div",4)(21,"div",9)(22,"div",10),_(23,Me,3,2,"button",11),o(),n(24,"div",10)(25,"a",12),u(26,"i",13),l(27," Voltar "),o()()()()()()}if(e&2){let m=S(10),f=S(17);a(),z("",s.isEdit?"Editar":s.isViewMode?"Visualizar":"Novo"," Curso"),a(8),c("disabled",s.isViewMode),R("ngModel",s.curso.nome),a(2),c("ngIf",m.errors&&(m.dirty||m.touched)),a(5),R("ngModel",s.curso.link),c("disabled",s.isViewMode),a(2),c("ngIf",(f.errors||f.invalid)&&(f.dirty||f.touched)),a(5),c("ngIf",!s.isViewMode),a(2),c("routerLink",M(9,we))}},dependencies:[k,L,le,re,oe,ne,de,ce,ue,ae,se],encapsulation:2});let r=i;return r})();var ke=[{path:"",component:P},{path:"listar",component:P},{path:"novo",component:N},{path:"editar/:id",component:N},{path:"visualizar/:id",component:N}],ve=(()=>{let i=class i{};i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=I({type:i}),i.\u0275inj=w({imports:[j.forChild(ke),j]});let r=i;return r})();var Xe=(()=>{let i=class i{};i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=I({type:i}),i.\u0275inj=w({providers:[{provide:D,useValue:"cursos"},{provide:x,useFactory:(t,e)=>new x(t,e),deps:[D,Y]}],imports:[K,ve,me,Z.forChild()]});let r=i;return r})();export{Xe as CursoModule};
